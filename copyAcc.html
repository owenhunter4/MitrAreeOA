<html>
<head>
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
</head>
<body>
    <button type="button" id="copy">Click me!</button>
</body>
</html>
<script>
window.addEventListener("DOMContentLoaded", copyTextToClipboard, false);

document.getElementById('copy')
    .addEventListener('click', () => copyTextToClipboard(
        '5862176136'));



window.onload = function() {
    try{
            //enc();
        initializeLiff('2001209920-VRZxy20E').then(function(){clickButton().then(function(){liff.closeWindow();});
        });
    }catch(e){alert(e);}
}

function clickButton(){
    return new Promise(function(resolve, reject) {
                document.getElementById('copy').click();

                resolve();

            });
}

function copyTextToClipboard() {
    return new Promise(function(resolve, reject) {
            // try {
            // navigator.clipboard.writeText(text);
            // console.log('Async: Copying to clipboard was successful!');
            // alert("คัดลอกบัญชีเรียบร้อย ลูกค้าสามารถวางในแอปธนาคารได้เลย");
            // resolve();
            // } catch (err) {
            //         try {
            //             console.log('Async: Could not copy text: ', err);
            //             var input = document.createElement('input');
            //             document.body.appendChild(input);
            //             input.value = text;
            //             input.select();
            //             const result = document.execCommand('copy');
            //             document.body.removeChild(input);
            //             alert(result);
            //             if (!result) {
            //             throw new Error('document.execCommand failed');
            //             }
            //             console.log('document.execCommand: Copying to clipboard was successful!');
            //             resolve();
            //         } catch (err) {
            //             //alert('コピーに失敗しました。');
            //             console.error('document.execCommand: Could not copy text: ', err);
            //             reject();
            //         }
            // }

                    // try {
                    //     var input = document.createElement('input');
                    //     document.body.appendChild(input);
                    //     input.value = text;
                    //     input.select();
                    //     const result = document.execCommand('copy',false);
                    //     document.body.removeChild(input);
                    //     alert(result);
                    //     if (!result) {
                    //     throw new Error('document.execCommand failed');
                    //     }
                    //     console.log('document.execCommand: Copying to clipboard was successful!');
                    //     resolve();
                    // } catch (err) {
                    //     //alert('コピーに失敗しました。');
                    //     console.error('document.execCommand: Could not copy text: ', err);
                    //     reject();
                    // }

                    'use strict';
                    var answer = true; //confirm(`Do you want to copy into the clipbaord `);
                    if (answer == true) {
                        let input = document.createElement('textarea');
                        input.innerHTML = "5862176136";
                        document.body.appendChild(input);
                        input.select();
                        let result = document.execCommand('copy', false);
                        document.body.removeChild(input);
                        alert("gg"+result);
                        if (result) {resolve();}
                        else{ alert("Failed to copy to clipboard")};
                    }

                    
    });
  }

function initializeLiff(myLiffId) {
  
  return new Promise(function(resolve, reject) {
    try{
    liff
        .init({
            liffId: myLiffId
        })
        .then(() => {
            resolve();
        })
        .catch((err) => {
          alert("liff.init    "+err);
        });

    //     liff.ready.then(() => {
    //     if(!liff.isLoggedIn()){
    //         liff.login();
    //     }    
    //     liff.getProfile().then((profile) => {            
    //        userId = profile.userId;
    //         linedisplayname = profile.displayName;
    //         imageProfileUrl = profile.pictureUrl;
    //         xos = liff.getOS();
    //         console.log(profile);
    //     //    alert(userId);
    //         resolve();
    //     }).catch((err) => {
    //       alert("liff.getProfile()    "+err);
    //     });;    
       
    // });
    
}catch(e){alert(e);}
  });

}
</script>