<html>
<head>
</head>
<body>
    <button type="button" id="copy">Click me!</button>
</body>
</html>
<script>

document.getElementById('copy')
    .addEventListener('click', () => copyTextToClipboard(
        '5862176136'));



window.onload = function() {
    try{
            //enc();
       clickButton().then(function(){liff.closeWindow();});

    }catch(e){alert(e);}
}



function clickButton(){
    return new Promise(function(resolve, reject) {
                document.getElementById('copy').click();

                resolve();

            });
}

function copyTextToClipboard(text) {
    return new Promise(function(resolve, reject) {
            try {
            navigator.clipboard.writeText(text);
            console.log('Async: Copying to clipboard was successful!');
            alert("คัดลอกบัญชีเรียบร้อย ลูกค้าสามารถวางในแอปธนาคารได้เลย");
            window.close()
            resolve();
            } catch (err) {
                    try {
                        console.log('Async: Could not copy text: ', err);
                        var input = document.createElement('input');
                        document.body.appendChild(input);
                        input.value = text;
                        input.select();
                        const result = document.execCommand('copy');
                        document.body.removeChild(input);
                        alert(result);
                        if (!result) {
                        throw new Error('document.execCommand failed');
                        }
                        console.log('document.execCommand: Copying to clipboard was successful!');
                        resolve();
                    } catch (err) {
                        //alert('コピーに失敗しました。');
                        console.error('document.execCommand: Could not copy text: ', err);
                        reject();
                    }
            }

                    
    });
  }

</script>